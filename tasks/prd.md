# GeoJSON圧縮ツール - Product Requirements Document (PRD)

## 1. プロダクト概要

### ビジョン
WebブラウザでGeoJSONファイルを即座に圧縮・最適化し、リアルタイムでマップ表示できる無料ツールを提供する。完全にクライアントサイド処理で動作し、広告収益で運営する。

### プロダクト名
**GeoCompact** - シンプルで覚えやすく、機能を表現

### ターゲットユーザー
- Web開発者・マップアプリケーション開発者
- GISデータアナリスト
- オープンデータ活用者
- 学術研究者・ジャーナリスト
- 個人プロジェクト開発者

## 2. 競合分析

### 主要競合
| サービス | 強み | 弱み | 月間訪問数 |
|---------|------|------|----------|
| **geojson.io** | 編集機能充実、GitHub連携 | 圧縮機能が弱い | 13.6K |
| **Mapshaper** | 高度な形状簡素化 | UI複雑、学習コスト高 | 69.8K |
| **Open Innovations GeoJSON Minify** | シンプル | 機能限定、マップ表示なし | 不明 |
| **Reduce GeoJSON** | ローカル処理 | 基本機能のみ | 少数 |

### 差別化ポイント
1. **即座のビジュアルフィードバック** - 貼り付けと同時にマップ表示
2. **リアルタイム圧縮率表示** - 圧縮前後のサイズを数値とグラフで可視化
3. **ワンクリックコピー** - 圧縮結果の即座コピー機能
4. **多段階圧縮オプション** - 品質と容量のバランス調整
5. **完全プライバシー保護** - データがサーバーに送信されない

## 3. 機能要件

### 3.1 コア機能

#### A. GeoJSON処理機能
- **貼り付け入力**: テキストエリアへの直接貼り付け
- **ファイルアップロード**: ドラッグ&ドロップ対応
- **バリデーション**: RFC 7946準拠チェック
- **エラーハンドリング**: 不正なGeoJSONの詳細エラー表示

#### B. シンプル圧縮機能
**自動最適化（設定不要）**
- 不要な空白・改行の除去
- 座標精度の最適化（小数点以下6桁まで）
- JSON構造の最適化
- 冗長なプロパティの自動削除

#### C. 履歴管理機能
- **localStorage活用**: 最新10件のGeoJSONを自動保存
- **履歴一覧**: サムネイル付きの過去データ表示
- **ワンクリック復元**: 過去のGeoJSONを即座に復元
- **履歴削除**: 個別・一括削除機能

#### D. マップ表示機能
- **即時プレビュー**: 貼り付け0.5秒後に自動表示
- **OpenStreetMap統合**: react-leaflet使用
- **レスポンシブデザイン**: モバイル対応
- **インタラクティブ要素**: ズーム、パン、ポップアップ表示

#### E. 出力機能
- **ワンクリックコピー**: 圧縮結果のクリップボードコピー
- **ダウンロード**: .geojson形式
- **圧縮統計**: 圧縮前後のサイズ比較表示
- **圧縮効果**: パーセンテージでの削減率表示

### 3.2 UI/UX要件

#### レイアウト構成
```
┌─ヘッダー（ロゴ・ナビ・広告）─────────────┐
│ ┌─入力エリア─────┐ ┌─マップ─────┐ │
│ │              │ │           │ │
│ │ GeoJSON      │ │ 地図表示  │ │
│ │ 貼り付け      │ │ (Leaflet) │ │
│ │              │ │           │ │
│ └──────────────┘ └───────────┘ │
│ ┌─履歴─────────┐ ┌─結果─────────┐ │
│ │ 最新10件     │ │ 圧縮結果    │ │
│ │ サムネイル   │ │ & 統計      │ │
│ │ 一覧        │ │ コピー/DL    │ │
│ └─────────────┘ └─────────────┘ │
│              広告エリア               │
└─────────────────────────────────────┘
```

#### インタラクション設計
- **直感的操作**: 貼り付け→即座に圧縮・マップ表示
- **履歴ナビゲーション**: サムネイルクリックで瞬時復元
- **shadcn/ui活用**: 統一されたデザインシステム
- **アクセシビリティ**: WCAG 2.1 AA準拠

### 3.3 技術要件

#### フロントエンド技術スタック
- **フレームワーク**: React 18+ with TypeScript
- **ビルドツール**: Vite 5+ (高速開発・ビルド)
- **UI Framework**: 
  - Tailwind CSS 3+ (ユーティリティファースト)
  - shadcn/ui (高品質Reactコンポーネント)
- **マップライブラリ**: react-leaflet 4+
- **状態管理**: React hooks (useState, useReducer)
- **データ保存**: localStorage API (履歴管理)
- **圧縮ライブラリ**: 
  - カスタム圧縮アルゴリズム
  - 座標精度調整
- **ユーティリティ**: 
  - clsx (条件付きクラス)
  - react-hot-toast (通知)
  - lucide-react (アイコン)

#### パフォーマンス要件
- **初回ロード**: 3秒以内
- **圧縮処理**: 10MB以下のファイルで5秒以内
- **メモリ使用量**: ブラウザクラッシュを避ける適切な制限
- **レスポンシブ**: 300ms以内のUI反応

#### ブラウザサポート
- Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
- モバイル: iOS Safari 14+, Chrome Android 90+

## 4. 収益化戦略

### 4.1 広告配置戦略
小規模ツールサイトに適した広告ネットワークを活用し、ユーザー体験を損なわない配置を行う。

#### プライマリ広告（Google AdSense）
- **バナー広告（728x90）**: ヘッダー下部
- **スクエア広告（336x280）**: 右サイドバー上部
- **レクタングル広告（300x250）**: 結果エリア下部

#### セカンダリ広告ネットワーク
AdSenseの代替として、より高い収益性が期待できるネットワークを併用：
- **Media.net**: コンテキスト広告、AdSenseよりも高いRPM可能性
- **PropellerAds**: 最低支払額$5、承認が簡単
- **Infolinks**: テキスト内広告、AdSenseと併用可能

#### ネイティブ広告
- **RevContent**: アドブロッカー耐性、高品質ネイティブ広告
- コンテンツ推奨スタイル、ツール下部に配置

### 4.2 収益予測

#### トラフィック目標
- **1か月目**: 1,000 PV/月
- **6か月目**: 10,000 PV/月
- **12か月目**: 50,000 PV/月

#### 収益予測（保守的見積もり）
- **AdSense CPM**: $1-3（技術系オーディエンス）
- **月間収益目標**:
  - 1,000 PV: $1-3
  - 10,000 PV: $10-30
  - 50,000 PV: $50-150

### 4.3 マネタイズ最適化
- **A/Bテスト**: 広告配置・サイズの最適化
- **ヒートマップ分析**: ユーザー行動分析
- **ページ滞在時間向上**: より多くの広告表示機会創出

## 5. ユーザーエクスペリエンス設計

### 5.1 ユーザージャーニー

#### ユーザージャーニー

#### 新規ユーザー
1. **発見**: 検索・SNS・コミュニティからの流入
2. **初回体験**: サンプルGeoJSONでの簡単デモ
3. **価値実感**: 圧縮効果の即座確認
4. **本格利用**: 実際のファイルでの作業

#### リピートユーザー
1. **効率的作業**: ブックマークから直接アクセス
2. **履歴活用**: localStorage保存された過去10件から選択
3. **ワークフロー統合**: 日常的な開発作業での活用

### 5.2 ユーザビリティ原則
- **即座のフィードバック**: 0.5秒以内の処理開始表示
- **明確な進捗表示**: shadcn/ui Progressコンポーネント活用
- **エラー回復支援**: 親切なエラーメッセージと修正提案
- **シンプル操作**: 設定不要の自動最適化
- **履歴活用**: 過去作業の簡単復元

## 6. 技術アーキテクチャ

### 6.1 クライアントサイド処理フロー
```
GeoJSON入力 → バリデーション → 自動圧縮 → マップ描画
     ↓              ↓           ↓          ↓
エラーチェック → localStorage保存 → 結果出力 → 統計表示
```

### 6.2 主要Reactコンポーネント

#### App
- 全体的な状態管理
- レイアウト制御
- 広告配置管理

#### GeoJSONInput
- テキストエリア（shadcn/ui Textarea）
- ファイルアップロード
- バリデーション表示

#### MapView
- react-leaflet統合
- 動的GeoJSONレンダリング
- インタラクティブ操作

#### HistoryPanel
- localStorage履歴管理
- サムネイル表示（shadcn/ui Card）
- 削除・復元機能

#### ResultsPanel
- 圧縮結果表示
- 統計情報（shadcn/ui Badge, Progress）
- コピー・ダウンロード（shadcn/ui Button）

#### CompressionEngine（カスタムフック）
- useGeoJSONCompression
- 自動圧縮ロジック
- パフォーマンス最適化

### 6.3 パフォーマンス最適化
- **Web Workers**: 重い処理のバックグラウンド実行
- **チャンク処理**: 大容量ファイルの分割処理
- **メモリ管理**: 適切なガベージコレクション
- **レイジーローディング**: 必要時のみライブラリ読み込み

## 7. セキュリティ・プライバシー

### 7.1 データ保護
- **完全ローカル処理**: データがサーバーに送信されない
- **一時メモリ使用**: 処理後の自動クリア
- **安全な出力**: XSS攻撃防止

### 7.2 広告品質管理
- **安全な広告のみ**: 悪意のある広告の排除
- **コンテンツ適合性**: 技術・地理関連広告の優先
- **ユーザビリティ保護**: 邪魔にならない広告配置

## 8. マーケティング・グロース戦略

### 8.1 SEO戦略
#### プライマリキーワード
- "GeoJSON compression tool"
- "GeoJSON minify online"
- "地図データ圧縮"
- "GeoJSON最適化"

#### コンテンツマーケティング
- GeoJSON最適化のベストプラクティス記事
- Web地図パフォーマンス改善ガイド
- オープンデータ活用チュートリアル

### 8.2 コミュニティ戦略
- **GitHub**: オープンソース化による信頼性向上
- **開発者コミュニティ**: Stack Overflow、Reddit/r/gis での回答提供
- **技術ブログ**: Qiita、Zenn での技術記事投稿
- **SNS**: Twitter での技術情報発信

### 8.3 パートナーシップ
- **教育機関**: 大学のGIS課程での利用促進
- **オープンデータプロジェクト**: 自治体・NGOとの連携
- **技術コミュニティ**: OSMコミュニティとの関係構築

## 9. 開発・リリース計画

### 9.1 MVP（Minimum Viable Product）- 4週間
**Week 1-2: 開発環境・コア機能**
- Vite + React + TypeScript環境構築
- Netlify連携設定（GitHub Actions自動デプロイ）
- shadcn/ui + Tailwind CSS setup
- 基本的なGeoJSON解析・バリデーション
- 自動圧縮（空白除去、座標精度調整）
- react-leafletによるマップ表示

**Week 3-4: UI完成・デプロイ**
- shadcn/uiコンポーネントを使ったUI実装
- localStorage履歴機能（最新10件）
- レスポンシブデザイン対応
- Netlify本番デプロイ
- 基本的な広告配置（AdSense）
- ベータテスト・フィードバック収集

### 9.2 フェーズ1拡張（6週間）
- 履歴管理の高度化（サムネイル、検索）
- マップスタイルのカスタマイズ
- 詳細な圧縮統計・分析
- Netlify Formsでフィードバック収集
- パフォーマンス最適化

### 9.3 フェーズ2成長（8週間）
- バッチ処理機能（複数ファイル対応）
- エクスポートオプション拡張
- 多言語対応（i18n）
- PWA対応（Netlify Edge Functions活用）
- Netlify Analyticsによる詳細分析

## 10. 成功指標（KPI）

### 10.1 ユーザー指標
- **月間アクティブユーザー**: 6か月で10,000MAU
- **リピート率**: 30%以上
- **平均セッション時間**: 3分以上
- **バウンス率**: 50%以下

### 10.2 技術指標
- **処理成功率**: 99%以上
- **平均圧縮率**: 40%以上
- **ページロード時間**: 3秒以内
- **アップタイム**: 99.9%

### 10.3 収益指標
- **広告CTR**: 1%以上
- **RPM**: $2以上
- **月間収益**: 6か月後$50以上

### 10.4 SEO指標
- **オーガニック検索流入**: 総流入の60%以上
- **主要キーワード順位**: 上位10位以内
- **被リンク獲得**: 月5本以上

## 11. リスク管理

### 11.1 技術リスク
- **ブラウザ制限**: 大容量ファイル処理の制約
- **ライブラリ依存**: 外部ライブラリの更新・廃止
- **パフォーマンス**: メモリ不足によるクラッシュ

**対策**: 段階的処理、代替ライブラリ準備、メモリ監視

### 11.2 競合リスク
- **既存サービスの機能拡張**: Mapshaper、geojson.ioの類似機能追加
- **Googleの新サービス**: 無料の公式ツール登場

**対策**: 継続的な機能差別化、ユーザビリティ重視、コミュニティ構築

### 11.3 収益リスク
- **広告ブロッカー**: 収益機会の減少
- **トラフィック変動**: 季節性・トレンド依存

**対策**: アドブロッカー耐性のある広告形式採用、多様な収益源確保

## 12. リスク管理

### 12.1 技術リスク
- **ブラウザ制限**: 大容量ファイル処理の制約
- **ライブラリ依存**: 外部ライブラリの更新・廃止
- **パフォーマンス**: メモリ不足によるクラッシュ

**対策**: 段階的処理、代替ライブラリ準備、メモリ監視

### 12.2 競合リスク
- **既存サービスの機能拡張**: Mapshaper、geojson.ioの類似機能追加
- **Googleの新サービス**: 無料の公式ツール登場

**対策**: 継続的な機能差別化、ユーザビリティ重視、コミュニティ構築

### 12.3 収益リスク
- **広告ブロッカー**: 収益機会の減少
- **トラフィック変動**: 季節性・トレンド依存

**対策**: アドブロッカー耐性のある広告形式採用、多様な収益源確保

## 13. 開発リソース見積もり

### 11.1 必要スキル
- **フロントエンド開発**: React、TypeScript、Tailwind CSS
- **shadcn/ui**: Reactコンポーネントライブラリ
- **GIS知識**: GeoJSON、地図投影、空間データ
- **Vite**: モダンビルドツール
- **UI/UXデザイン**: ユーザビリティ、アクセシビリティ
- **Web マーケティング**: SEO、コンテンツマーケティング

### 13.2 開発体制
- **フルスタック開発者**: 1名（主開発）
- **UI/UXデザイナー**: 0.5名（外注可）
- **マーケティング**: 0.5名（SEO・コンテンツ）

### 13.3 運用コスト（Netlify使用）
- **ホスティング**: Netlify Free Plan
  - 100GB帯域幅/月（十分な容量）
  - 自動SSL証明書
  - CDN配信
  - 継続的デプロイメント
- **カスタムドメイン**: $12/年
- **分析ツール**: 
  - Google Analytics（無料）
  - Netlify Analytics（$9/月 - オプション）
- **追加サービス**: 
  - Netlify Forms（コンタクトフォーム用、無料枠内）
  - Edge Functions（将来の機能拡張用）

**年間運用コスト**: $12-120（基本プランのみなら$12/年）

### Netlifyの活用メリット
- **Git連携**: GitHubプッシュで自動デプロイ
- **プレビューデプロイ**: プルリクエストごとの自動プレビュー
- **フォーム処理**: 広告収益最適化のためのフィードバック収集
- **分析機能**: サーバーレスでのアクセス解析
- **CDN**: 世界中で高速配信
- **無料SSL**: HTTPS自動対応

## 12. まとめ

GeoCompactは、既存のGeoJSON圧縮ツールの制限を解決し、即座のビジュアルフィードbackと高い圧縮効率を両立する革新的なツールです。React + Vite + shadcn/uiによるモダンな開発環境とNetlifyのサーバーレスインフラにより、完全なクライアントサイド処理でユーザーのプライバシーを保護しながら、広告収益モデルで持続可能な運営を実現します。

localStorage履歴機能により、開発者の日常的なワークフローに組み込まれ、設定不要のシンプルな操作で最適な圧縮結果を提供します。技術者・研究者・開発者の生産性向上に貢献し、GeoJSONエコシステムに価値を提供する長期的なプロダクトとなることを目指します。

**Netlifyの活用により年間運用コストを$12に抑制し、無料プランでも十分なパフォーマンスと機能を提供できます。**


